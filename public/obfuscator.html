<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Lua/Luau Obfuscator - Luex</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body{background:linear-gradient(135deg,#1e3a8a,#3b82f6);min-height:100vh;display:flex;justify-content:center;align-items:center;font-family:Inter,sans-serif;padding:1rem}
        .container{background:rgba(255,255,255,.95);backdrop-filter:blur(10px);border-radius:1rem;box-shadow:0 4px 20px rgba(0,0,0,.2);padding:1.5rem sm:p-2rem;max-width:900px;width:100%}
        textarea{resize:none;transition:all .3s ease;font-size:0.9rem}
        textarea:focus{border-color:#3b82f6;box-shadow:0 0 0 3px rgba(59,130,246,.3)}
        button{transition:all .3s ease}
        button:hover{transform:translateY(-2px)}
        .copy-btn:hover svg{transform:scale(1.1)}
        .logo-container{display:flex;justify-content:center;margin-bottom:1rem}
        .logo-text{font-size:2rem;font-weight:900;background:linear-gradient(45deg,#3b82f6,#10b981);-webkit-background-clip:text;color:transparent;text-shadow:0 2px 4px rgba(0,0,0,.2);transition:transform .3s ease}
        .logo-text:hover{transform:scale(1.05)}
        @media (max-width:640px){.container{padding:1rem}.text-3xl{font-size:1.5rem}.text-sm{font-size:0.8rem}textarea{font-size:0.8rem;padding:0.5rem}.grid-cols-1{gap:1rem}.flex-col{gap:1rem}}
    </style>
</head>
<body>
    <div class="container">
        <div class="logo-container">
            <div class="logo-text">Luex</div>
        </div>
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-2">Obfuscator Lua/Luau ASCII</h1>
        <p class="text-center text-sm text-gray-600 mb-4">Che giấu logic mã, ngăn chặn đánh cắp, tăng độ khó phân tích ngược</p>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
                <label for="inputCode" class="block text-sm font-medium text-gray-700 mb-2">Mã Lua/Luau Đầu Vào</label>
                <textarea id="inputCode" rows="10" class="w-full p-3 border rounded-lg focus:outline-none" placeholder="Nhập mã Lua/Luau của bạn tại đây..."></textarea>
            </div>
            <div>
                <label for="outputCode" class="block text-sm font-medium text-gray-700 mb-2">Mã Đã Obfuscate</label>
                <textarea id="outputCode" rows="10" class="w-full p-3 border rounded-lg bg-gray-50" readonly placeholder="Mã đã obfuscate sẽ hiển thị tại đây..."></textarea>
                <button id="copyBtn" class="mt-2 flex items-center justify-center w-full bg-green-500 text-white py-2 rounded-lg hover:bg-green-600 copy-btn">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                    </svg>
                    Sao Chép
                </button>
            </div>
        </div>
        <div class="flex flex-col md:flex-row justify-between mt-6 gap-4">
            <div class="flex-1">
                <label for="obfLevel" class="block text-sm font-medium text-gray-700 mb-2">Mức Độ Obfuscate</label>
                <select id="obfLevel" class="w-full p-3 border rounded-lg focus:outline-none">
                    <option value="1">1 (Cơ bản)</option>
                    <option value="2">2 (Trung bình)</option>
                    <option value="3">3 (Mạnh)</option>
                    <option value="4">4 (Rất mạnh)</option>
                    <option value="5">5 (Cực mạnh)</option>
                    <option value="6">6 (Siêu mạnh)</option>
                    <option value="7">7 (Điên rồ)</option>
                    <option value="8">8 (Ác mộng)</option>
                    <option value="9">9 (Bất khả thi)</option>
                    <option value="10">10 (Thần thánh)</option>
                </select>
            </div>
            <div class="flex-1 flex items-center">
                <input type="checkbox" id="addJunk" class="mr-2">
                <label for="addJunk" class="text-sm font-medium text-gray-700">Thêm Junk Code</label>
            </div>
        </div>
        <div class="flex justify-center mt-6">
            <button id="obfuscateBtn" class="bg-blue-500 text-white py-3 px-6 rounded-lg hover:bg-blue-600">Obfuscate</button>
        </div>
    </div>
    <script>
        function obfuscateToAscii(code) {
            const encoder = new TextEncoder();
            const bytes = encoder.encode(code);
            let result = '';
            for (let byte of bytes) {
                result += `\\${byte}`;
            }
            return `loadstring("${result}")()`;
        }

        function generateJunkCode(targetLength) {
            const junkTemplates = [
                `local f${Math.floor(Math.random()*1000)}=function() end`,
                `local mathJunk${Math.floor(Math.random()*1000)}=math.sin(math.pi*math.random())+math.cos(math.random()*2);`,
                `if math.random()>0.5 then local a=math.floor(math.random()*100)^math.random(); else end`,
                `for i=1,${Math.floor(Math.random()*10)} do local b=(i*math.random())%math.pi; end`,
                `local v${Math.floor(Math.random()*1000)}=${Math.random()>0.5?'true':'false'}; local c=v and math.log(math.random()+1) or math.exp(math.random());`,
                `if false then elseif true then local d=math.sqrt(math.random()*100)-math.tan(math.random()); end`,
                `while false do local e=math.abs(math.random()-0.5)*math.rad(math.random()*360); end`,
                `repeat local f=math.ceil(math.random()*10)+math.floor(math.random()*10); until true;`,
                `local t${Math.floor(Math.random()*1000)}={}; t.junk=math.deg(math.asin(math.random()));`,
                `local g=math.pow(math.random(),math.random())*math.atan(math.random());`,
                `if math.random()<0.3 then local h=math.sinh(math.random())+math.cosh(math.random()); elseif math.random()>0.7 then local i=math.tanh(math.random()); end`,
                `local addJunk${Math.floor(Math.random()*1000)}=math.random(1,100)+math.random(1,100)-math.random(1,50);`,
                `local subJunk${Math.floor(Math.random()*1000)}=math.random(100,200)-math.random(50,100)+math.random(1,10);`,
                `local mulJunk${Math.floor(Math.random()*1000)}=math.random()*math.random(2,5)+math.random(0.1,1);`,
                `local divJunk${Math.floor(Math.random()*1000)}=math.random(10,100)/math.random(1,5)-math.random(0.5,2);`,
                `local mixedOp1${Math.floor(Math.random()*1000)}=(math.random()+math.random())*(math.random()-math.random());`,
                `local mixedOp2${Math.floor(Math.random()*1000)}=math.random(5,10)/math.random(1,3)+math.random()*math.random(0,1);`,
                `if math.random()>0.4 then local j=(math.random()*10)+(math.random()/2)-3; end`,
                `for k=1,${Math.floor(Math.random()*5)} do local l=k+math.random()-math.random()*k; end`,
                `local tableJunk${Math.floor(Math.random()*1000)}={math.random()+1, math.random()-0.5, math.random()*2 / 3};`,
                `local strJunk${Math.floor(Math.random()*1000)}=tostring(math.random(1000)) .. tostring(math.random(1,10)+5);`,
                `local numJunk${Math.floor(Math.random()*1000)}=tonumber(""..math.random(1,9)) - math.random(0.1,0.9);`,
                `repeat local m=math.random()*math.random()+math.random()-math.random()/math.random(); until false;`,
                `while math.random()<0.1 do local n=math.pi + math.e - math.random()*math.tau; end`,
                `local funcJunk${Math.floor(Math.random()*1000)}=function(x) return x + math.random() - x * math.random(); end;`,
                `local condJunk${Math.floor(Math.random()*1000)}=math.random()>0.5 and (1+2-3*4/5) or (6-7+8/9*10);`,
                `local loopJunk${Math.floor(Math.random()*1000)}=0; for _=1,3 do loopJunk=loopJunk + math.random(1,2) - 1; end;`,
                `local arrayJunk${Math.floor(Math.random()*1000)}={}; for i=1,4 do arrayJunk[i]=i*math.random() - i + math.random(); end;`,
                `if true then local o=(math.random()+math.random()-math.random())*math.random()/math.random(); end`,
                `local p=math.random(100); p = p + math.random(1,10) - math.random(5,15) * math.random(0.5,2) / math.random(1,3);`
            ];
            let junk = '';
            const usedTemplates = new Set();
            while (junk.length < targetLength) {
                let templateIndex = Math.floor(Math.random() * junkTemplates.length);
                while (usedTemplates.has(templateIndex)) {
                    templateIndex = Math.floor(Math.random() * junkTemplates.length);
                }
                usedTemplates.add(templateIndex);
                const template = junkTemplates[templateIndex];
                junk += template + ' ';
                if (usedTemplates.size === junkTemplates.length) {
                    usedTemplates.clear();
                }
            }
            return junk.slice(0, targetLength*2).trim();
        }

        function minifyLua(code) {
            return code.replace(/\s+/g, ' ').replace(/\s*([=;{}()])\s*/g, '$1').trim();
        }

        document.getElementById('obfuscateBtn').addEventListener('click', () => {
            const inputCode = document.getElementById('inputCode').value;
            if (!inputCode.trim()) {
                alert('Vui lòng nhập mã Lua/Luau để obfuscate!');
                return;
            }
            const level = parseInt(document.getElementById('obfLevel').value);
            const addJunk = document.getElementById('addJunk').checked;

            let obfuscated = inputCode;
            for (let i = 0; i < level; i++) {
                obfuscated = obfuscateToAscii(obfuscated);
            }

            if (addJunk) {
                const junkLength = obfuscated.length;
                const junk = generateJunkCode(junkLength);
                obfuscated += ' ' + junk;
            }

            document.getElementById('outputCode').value = minifyLua(obfuscated);
        });

        document.getElementById('copyBtn').addEventListener('click', () => {
            const outputCode = document.getElementById('outputCode');
            outputCode.select();
            try {
                document.execCommand('copy');
                alert('Đã sao chép vào clipboard!');
            } catch (err) {
                alert('Không thể sao chép!');
            }
        });
    </script>
</body>
</html>
